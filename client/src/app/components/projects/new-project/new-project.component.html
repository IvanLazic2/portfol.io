<div *ngIf="this.userService.GetLoggedIn() | async">

    <div class="navbar navbar-expand-sm p-3">
        <div class="container-md" style="background-color: red;">

            <h2 class="d-inline" id="page-title">Create a <b>new project</b></h2>

        </div>
    </div>

    <hr class="m-0">

    <form [formGroup]="form" (ngSubmit)="onSubmit()">

        <div>
            <label for="projectName">Name:</label>
            <input type="text" id="projectName" formControlName="projectName">

            <div *ngIf="projectName.invalid && projectName.touched">
                <p *ngIf="projectName.errors?.['required']">Name is required</p>
                <p *ngIf="projectName.errors?.['minLength']">Name must be at least 3 characters long</p>
            </div>
        </div>


        <div>
            <label for="projectConcept">Concept:</label>
            <input type="text" id="projectConcept" formControlName="projectConcept">

            <div *ngIf="projectConcept.invalid && projectConcept.touched">
                <p *ngIf="projectConcept.errors?.['pattern']">Concept must contain only alphanumeric characters and
                    spaces</p>
            </div>
        </div>


        <div class="drop-zone" (dragover)="onDragOver($event)" (drop)="onDrop($event)" (click)="onClick()">
            <p>Drag and drop your files here</p>
        </div>

        <input id="fileInput" type="file" formArrayName="files" multiple (change)="onFileChange($event)">

        
        <ul formArrayName="files">
            <li *ngFor="let file of files.controls; let i = index" [formGroupName]="i">
                <img [src]="file.value | safeUrl">
                <button type="button" (click)="onRemove(i)">Remove</button>
            </li>
        </ul>

        <div *ngIf="files.invalid && files.touched">
            <p *ngIf="files.errors?.['required']">At least one file is required</p>
        </div>

        <button type="submit">Submit</button>

        <progress [value]="progress" max="100"></progress>

    </form>
</div>